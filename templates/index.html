<html lang="en">
<head>
    <link href="static/main.css" rel="stylesheet" type="text/css" media="all">
    <link rel="stylesheet" href="http://openlayers.org/en/v3.12.1/css/ol.css" type="text/css">
    <script src="static/jquery.js"></script>
    <style>

      .mapcontainer {
        position: relative;
      }
      .map {
        margin: 0 auto;
        height: 600px;
        width: 90%;
      }
    </style>
    <script src="http://openlayers.org/en/v3.12.1/build/ol.js" type="text/javascript"></script>
</head>
    <body>
      <div class="header">
          <h1>Tweet Heatmap</h1><h3>(Loklak.org as a source)</h3>
          <div class="box">
            <input type="text" name="search" id="search" placeholder="Search term" onChange="updateMap();" required/>
          </div>
        </div>
      
      <div id="map" class="map"></div>

      <h5 style="text-align:center;">Check <a href="https://github.com/PolBaladas/LoklakHeatmap">this Project</a> on Github</h5>
    
    <script type="text/javascript">
      var map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.MapQuest({layer: 'sat'})
          })
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([0, 0]),
          zoom: 2
        })
      });

      function updateMap(){
        var query = document.getElementById('search').value;
        if(query!='' || query!=' ' || query!=null){
          var tweetLocations = getTweetsLocations(query);
          renderTweets(tweetLocations);  
        }
      }

      function getTweetsLocations(query){
        raw_data = $.get("http://loklak.org/api/search.json?q="+query, function(data){
          alert(data)
          locations = []
          tweets = data;
          return locations
        });
      }

      function renderTweets(locations){

      }

    </script>
</body>
</html>